<div class="row">
    <div class="col-sm-12">
        <div class="card">

            <div class="card-block main-card-block">
                <div class="border-bt">
                    <h2 class="main-title">{{'crowdfunding.create-campaign.title'| translate}} </h2>
                    <app-breadcrumb></app-breadcrumb>
                </div>
                <div class="card-body mt-4">
                    <div class="card-block ml-md-3 mr-md-3">
                        <aw-wizard [navBarLayout]="'large-filled-symbols'">
                            <aw-wizard-step stepTitle="{{'common.details-step'| translate}} " [navigationSymbol]="{ symbol: '1' }">
                                <form class="form inner-form" #f1="ngForm" novalidate>
                                    <div class="form-body">
                                        <div class="row mt-4">
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label>{{'common.name-label'| translate}}
                                                        <i class="fa fa-question-circle-o" triggers="mouseenter:mouseleave"
                                                            container="body" placement="right" ngbPopover="{{'crowdfunding.create-campaign.name-popover'| translate}}">
                                                        </i>
                                                    </label>
                                                    <div class="m-0">
                                                        <input type="text" class="form-control" [(ngModel)]="campaignForm.name"
                                                            name="name" #name="ngModel" minlength="3" maxlength="10"
                                                            placeholder="{{'common.name-label'| translate}}" required>
                                                        <div *ngIf="name?.invalid && (name?.dirty || name?.touched)"
                                                            class="input-error">
                                                            <div *ngIf="name?.errors.required">
                                                                {{'crowdfunding.create-campaign.name-required'|
                                                                translate}}
                                                            </div>
                                                            <div *ngIf="name?.errors.minlength">
                                                                {{'crowdfunding.create-campaign.name-at-least'|
                                                                translate}}
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label>{{'common.code-label'| translate}}
                                                        <i class="fa fa-question-circle-o" triggers="mouseenter:mouseleave"
                                                            container="body" placement="right" ngbPopover="{{'crowdfunding.create-campaign.code-popover'| translate}}">
                                                        </i>
                                                    </label>
                                                    <div class="m-0">
                                                        <input type="text" class="form-control" [(ngModel)]="campaignForm.code"
                                                            name="code" #code="ngModel" minlength="3" maxlength="6"
                                                            placeholder="{{'common.code-label'| translate}}" required>
                                                        <div *ngIf="code?.invalid && (code?.dirty || code?.touched)"
                                                            class="input-error">
                                                            <div *ngIf="code?.errors.required">
                                                                {{'common.code-required'|
                                                                translate}}
                                                            </div>
                                                            <div *ngIf="code?.errors.minlength">
                                                                {{'crowdfunding.create-campaign.code-at-least'|
                                                                translate}}
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label>{{'common.description-label'| translate}}
                                                <i class="fa fa-question-circle-o" triggers="mouseenter:mouseleave"
                                                    container="body" placement="right" ngbPopover="{{'crowdfunding.create-campaign.description-popover'| translate}}">
                                                </i>
                                            </label>
                                            <div class="position-relative">
                                                <textarea rows="5" class="form-control" [(ngModel)]="campaignForm.desc"
                                                    name="desc" placeholder="{{'common.description-label'| translate}}"
                                                    #desc="ngModel" required></textarea>
                                                <div *ngIf="desc?.invalid && (desc?.dirty || desc?.touched)" class="input-error">
                                                    <div *ngIf="desc?.errors.required">
                                                        {{'common.description-required'| translate}}
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="mt-4 left">
                                        <button type="button" [disabled]="f1.invalid" (click)="getBlockChainStatus()"
                                            class="btn btn-gradient mr-1 mb-0 float-right" awNextStep>
                                            <i class="fa fa-chevron-right"></i> {{'common.next-btn'| translate}}
                                        </button>
                                    </div>
                                </form>
                            </aw-wizard-step>
                            <aw-wizard-step stepTitle="{{'common.details-step'| translate}}" [navigationSymbol]="{ symbol: '2' }">
                                <form class="form inner-form" #f2="ngForm" novalidate>
                                    <div class="form-body">
                                        <div class="row">
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <label>{{'common.initial-supply-label'| translate}}
                                                        <i class="fa fa-question-circle-o" triggers="mouseenter:mouseleave"
                                                            container="body" placement="right" ngbPopover="{{'crowdfunding.create-campaign.initial-supply-popover'| translate}}">
                                                        </i>
                                                    </label>
                                                    <div class="input-group m-0 sign_in_inputs row form-border-bottom pb-1">
                                                        <div class="col-9 pl-0">
                                                            <input type="number" class="pl-0 mb-0 pt-0 pb-0 form-control"
                                                                [(ngModel)]="campaignForm.initialSupply" name="initialSupply"
                                                                #initialSupply="ngModel" [minValue]="0" required>
                                                        </div>
                                                        <div class="col-3 text-right pl-0">
                                                            <div class="input-single-group">
                                                                <span class="input-group-text text-right">
                                                                    {{'common.units-text'| translate}}
                                                                </span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div *ngIf="initialSupply?.invalid && (initialSupply?.dirty || initialSupply?.touched)"
                                                        class="input-error">
                                                        <div *ngIf="initialSupply?.errors.required">
                                                            {{'common.initial-supply-required'| translate}}
                                                        </div>
                                                        <div *ngIf="initialSupply?.errors.minValue && !initialSupply?.errors.required">
                                                            {{'crowdfunding.create-campaign.initial-supply-greater'|
                                                            translate}}
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <label>{{'crowdfunding.create-campaign.reserve-supply-label'|
                                                        translate}}
                                                        <i class="fa fa-question-circle-o" triggers="mouseenter:mouseleave"
                                                            container="body" placement="right" ngbPopover="{{'crowdfunding.create-campaign.reserve-supply-popover'| translate}}">
                                                        </i>
                                                    </label>
                                                    <div class="input-group m-0 sign_in_inputs row form-border-bottom pb-1">
                                                        <div class="col-9 pl-0">
                                                            <input type="number" class="pl-0 mb-0 pt-0 pb-0 form-control"
                                                                (input)="changeMinAmount()" [(ngModel)]="campaignForm.reserveSupply"
                                                                name="reserveSupply" #reserveSupply="ngModel"
                                                                [minValue]="1" required>
                                                        </div>
                                                        <div class="col-3 text-right pl-0">
                                                            <div class="input-single-group">
                                                                <span class="input-group-text text-right">
                                                                    {{'common.units-text'| translate}}
                                                                </span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div *ngIf="reserveSupply?.invalid && (reserveSupply?.dirty || reserveSupply?.touched)"
                                                        class="input-error">
                                                        <div *ngIf="reserveSupply?.errors.required">
                                                            {{'crowdfunding.create-campaign.reserve-supply-required'|
                                                            translate}}
                                                        </div>
                                                        <div *ngIf="reserveSupply?.errors.minValue && !reserveSupply?.errors.required">
                                                            {{'crowdfunding.create-campaign.reserve-supply-greater'|
                                                            translate}}
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <label>{{'crowdfunding.create-campaign.min-amount-per-unit-label'|
                                                        translate}}
                                                        <i class="fa fa-question-circle-o" triggers="mouseenter:mouseleave"
                                                            container="body" placement="right" ngbPopover="{{'crowdfunding.create-campaign.min-amount-popover'| translate}}">
                                                        </i>
                                                    </label>
                                                    <div class="input-group m-0 sign_in_inputs row form-border-bottom pb-1">
                                                        <div class="col-10 pl-0">
                                                            <input type="number" class="pl-0 mb-0 pt-0 pb-0 form-control"
                                                                (input)="changeMinAmount()" [(ngModel)]="campaignForm.minReservePerUnitTQT"
                                                                name="minReservePerUnitTQT" #minReservePerUnitTQT="ngModel"
                                                                [minValue]="1" required>
                                                        </div>
                                                        <div class="col-2 text-right pl-0">
                                                            <div class="input-single-group">
                                                                <span class="input-group-text text-right">
                                                                    {{'common.xin-unit-text'| translate}}
                                                                </span>
                                                            </div>
                                                        </div>

                                                    </div>
                                                    <div *ngIf="minReservePerUnitTQT?.invalid && (minReservePerUnitTQT?.dirty || minReservePerUnitTQT?.touched)"
                                                        class="input-error">
                                                        <div *ngIf="minReservePerUnitTQT?.errors.required">
                                                            {{'crowdfunding.create-campaign.min-amount-required'|
                                                            translate}}
                                                        </div>
                                                        <div *ngIf="minReservePerUnitTQT?.errors.minValue && !minReservePerUnitTQT?.errors.required">
                                                            {{'crowdfunding.create-campaign.min-amount-greater'|
                                                            translate}}
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row mt-3">
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <label>{{'crowdfunding.create-campaign.total-amount-raise-label'|
                                                        translate}}
                                                        <i class="fa fa-question-circle-o  ml-1 info-yellow" triggers="mouseenter:mouseleave"
                                                            container="body" placement="right" ngbPopover="{{'crowdfunding.create-campaign.total-amount-raise-popover'| translate}}">
                                                        </i>
                                                    </label>
                                                    <div class="input-group m-0 sign_in_inputs row form-border-bottom pb-1">
                                                        <div class="col-9 pl-0">
                                                            <input type="number" [attr.disabled]="true" class="pl-0 mb-0 pt-0 pb-0 form-control"
                                                                [(ngModel)]="campaignForm.totalAmount" name="totalAmount">
                                                        </div>
                                                        <div class="col-3">
                                                            <div class="input-single-group">
                                                                <span class="input-group-text text-right">
                                                                    {{'common.xin-unit-text'| translate}}
                                                                </span>
                                                            </div>
                                                        </div>

                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-8">
                                                <div class="form-group">
                                                    <label>{{'crowdfunding.create-campaign.issuance-height-label'|
                                                        translate}}
                                                        <i class="fa fa-question-circle-o" placement="right" triggers="mouseenter:mouseleave"
                                                            container="body" ngbPopover="{{'crowdfunding.create-campaign.issuance-height-popover'| translate}}">
                                                        </i>
                                                    </label>
                                                    <div class="input-group m-0 sign_in_inputs row form-border-bottom pb-1">
                                                        <div class="col-3 col-md-2">
                                                            <span class="input-group-text">
                                                                {{'common.block-text'| translate}} : {{
                                                                campaignForm.currentHeight }}
                                                            </span>
                                                        </div>
                                                        <div class="col-4 col-md-3 pr-0">
                                                            <input type="number" class="pl-0 mb-0 pt-0 pb-0 form-control"
                                                                [(ngModel)]="campaignForm.issuanceHeight" name="issuanceHeight"
                                                                [minValue]="1440" [maxValue]="43200" #issuanceHeight="ngModel"
                                                                required placeholder="1440">
                                                        </div>
                                                        <div class="col-2 pr-0">
                                                            <span class="input-group-text">
                                                                {{ campaignForm.days }} {{'common.days-text'|
                                                                translate}}
                                                            </span>
                                                        </div>
                                                        <div class="col-12 col-md-5 pr-1 pl-0 text-right">
                                                            <div class="btn-icon-group text-right text-sm-center">
                                                                <a class="btn btn-primary" (click)="min()">
                                                                    <i class="fa fa-fast-backward"></i>
                                                                </a>
                                                                <a class="btn btn-primary" (click)="decrement()">
                                                                    <i class="fa fa-minus"></i>
                                                                </a>
                                                                <a class="btn btn-primary" (click)="increment()">
                                                                    <i class="fa fa-plus"></i>
                                                                </a>
                                                                <a class="btn btn-primary" (click)="max()">
                                                                    <i class="fa fa-fast-forward"></i>
                                                                </a>
                                                            </div>
                                                        </div>


                                                    </div>
                                                    <div *ngIf="issuanceHeight?.invalid && (issuanceHeight?.dirty || issuanceHeight?.touched)"
                                                        class="input-error">
                                                        <div *ngIf="issuanceHeight?.errors.required">
                                                            {{'crowdfunding.create-campaign.issuance-height-required'|
                                                            translate}}
                                                        </div>
                                                        <div *ngIf="issuanceHeight?.errors.minValue && !issuanceHeight?.errors.required">
                                                            {{'crowdfunding.create-campaign.issuance-height-greater'|
                                                            translate}}
                                                        </div>
                                                        <div *ngIf="issuanceHeight?.errors.maxValue && !issuanceHeight?.errors.required">
                                                            {{'crowdfunding.create-campaign.issuance-height-less'|
                                                            translate}}
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="mt-3">
                                        <button type="button" [disabled]="f2.invalid" class="btn btn-gradient mr-1  mb-2 float-right"
                                            (click)="createCampaign()" awNextStep>
                                            <i class="fa fa-chevron-right"></i> {{'common.next-btn'| translate}}
                                        </button>
                                        <button type="button" class="btn btn-gradient mr-1  mb-2 float-right"
                                            awPreviousStep>
                                            <i class="fa fa-chevron-left"></i> {{'common.previous-btn'| translate}}
                                        </button>
                                    </div>
                                </form>
                            </aw-wizard-step>
                            <aw-wizard-step stepTitle="{{'common.confirm-step'| translate}} " [navigationSymbol]="{ symbol: '3' }"
                                class="form-bordered mt-4">
                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="ucsb"> {{'common.name-label'| translate}}
                                        </div>
                                        <h4> {{campaignForm.name}} </h4>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="ucsb"> {{'common.code-label'| translate}}
                                        </div>
                                        <h4> {{campaignForm.code}} </h4>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="ucsb"> {{'common.description-label'| translate}}
                                        </div>
                                        <h4> {{campaignForm.desc}} </h4>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="ucsb"> {{'crowdfunding.create-campaign.reserve-supply-label'|
                                            translate}}
                                        </div>
                                        <h4> {{campaignForm.reserveSupply}}
                                            <small> {{'common.units-text'| translate}} </small>
                                        </h4>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="ucsb"> {{'crowdfunding.create-campaign.max-supply-label'|
                                            translate}}
                                        </div>
                                        <h4> {{campaignForm.maxSupply}}
                                            <small> {{'common.units-text'| translate}} </small>
                                        </h4>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="ucsb"> {{'common.initial-supply-label'| translate}}
                                        </div>
                                        <h4> {{campaignForm.initialSupply}} </h4>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="ucsb"> {{'crowdfunding.create-campaign.issuance-height-label'|
                                            translate}}
                                        </div>
                                        <h4> + {{campaignForm.issuanceHeight}}
                                            <small> {{'common.blocks-text'| translate}} </small>
                                        </h4>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="ucsb"> {{'crowdfunding.create-campaign.min-reserve-label'|
                                            translate}}
                                        </div>
                                        <h4> {{campaignForm.minReservePerUnitTQT}}
                                            <small> {{'common.xin-unit-text'| translate}} </small>
                                        </h4>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="ucsb"> {{'crowdfunding.create-campaign.total-amount-raised-label'|
                                            translate}}
                                        </div>
                                        <h4 *ngIf="minReservePerUnitTotal"> {{minReservePerUnitTotal | numberString:
                                            campaignForm.decimals }}
                                            <small> {{'common.xin-unit-text'| translate}} </small>
                                        </h4>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="ucsb"> {{'common.valid-label'| translate}}
                                        </div>
                                        <h4 [innerHTML]="validBytes | txIsValid"> </h4>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="ucsb"> {{'common.service-fee-label'| translate}}
                                        </div>
                                        <h4> {{ tx_fee | amountTkn }}
                                            <small> {{'common.xin-unit-text'| translate}}</small>
                                        </h4>
                                    </div>
                                </div>

                                <button type="button" [ngClass]="{'btn-success': !unsignedTx, 'btn-danger': unsignedTx}"
                                    class="btn btn-raised mr-1 mb-0" (click)="unsignedTx = !unsignedTx">
                                    <i class="fa fa-key"></i> {{'common.signed-transaction-label'| translate}}
                                </button>

                                <div class="form-group" *ngIf="unsignedTx">
                                    <div class="position-relative sign_in_inputs">
                                        <textarea disabled="true" rows="3" type="text" [(ngModel)]="transactionBytes"
                                            class="form-control pl-0" name="key"></textarea>
                                    </div>
                                </div>
                                <div class="mt-4">
                                    <button type="button" [disabled]="!validBytes" class="btn btn-gradient float-right"
                                        (click)="broadcastTransaction(transactionBytes)">
                                        <i class="fa fa-check"></i> {{'common.finish-btn'| translate}}
                                    </button>
                                    <button type="button" class="btn btn-gradient mr-1 float-right" awPreviousStep>
                                        <i class="fa fa-chevron-left"></i> {{'common.previous-btn'| translate}}
                                    </button>
                                </div>
                            </aw-wizard-step>
                        </aw-wizard>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>